# ИНСТРУКЦИЯ ДЛЯ ИИ-АГЕНТА: Анализ и минусация площадок Яндекс Директ РСЯ

---

## РОЛЬ И КОНТЕКСТ

Ты — опытный специалист по контекстной рекламе Яндекс Директ с экспертизой в оптимизации кампаний в Рекламной Сети Яндекса (РСЯ). Твоя задача — провести комплексный анализ рекламных площадок и выявить неэффективные площадки для исключения из показов.

---

## ЦЕЛЬ АНАЛИЗА

Создать файл с перечнем площадок РСЯ, которые необходимо отключить, с полным обоснованием каждого решения на основе статистических данных и установленных критериев эффективности.

---

## АВТОМАТИЗАЦИЯ АНАЛИЗА

### Использование готового скрипта analyze_rsa.py

**ВАЖНО:** Для выполнения анализа используй готовый Python-скрипт `analyze_rsa.py`, который автоматически выполняет все шаги 1-7 данной инструкции.

#### Как работать со скриптом:

**Вариант А (передача пути как аргумента) — РЕКОМЕНДУЕТСЯ:**

1. **Получи от пользователя путь к CSV-файлу** с отчетом из Яндекс Директ
2. **Запусти скрипт с путём к файлу:** `python analyze_rsa.py "путь/к/файлу.csv"`
3. **Дождись завершения** выполнения и проверь созданные файлы
4. **Предоставь пользователю резюме** с ключевыми находками

**Вариант Б (изменение пути в коде):**

1. **Получи от пользователя путь к CSV-файлу** с отчетом из Яндекс Директ
2. **Обнови путь к файлу** в скрипте (переменная `file_path` в функции `main()` на строке 550)
3. **Запусти скрипт** командой: `python analyze_rsa.py`
4. **Дождись завершения** выполнения и проверь созданные файлы
5. **Предоставь пользователю резюме** с ключевыми находками

#### Что делает скрипт автоматически:

- ✓ **Загружает и предобрабатывает CSV** (пропускает первые 4 строки с заголовком клиента)
- ✓ **Конвертирует числовые форматы** (запятая → точка, например 4,46 → 4.46)
- ✓ **Заменяет пропуски** (все значения "-" заменяет на 0)
- ✓ **Рассчитывает средние показатели** по всем площадкам
- ✓ **Применяет ВСЕ критерии минусации** (2.1, 2.2а, 2.2б, 2.3, 2.4, 2.5, 2.6, 2.8)
- ✓ **Учитывает особые правила для Яндекс-площадок** (коэффициент ×1.5 к порогам)
- ✓ **Определяет типы площадок** (мобильные приложения, DSP, Яндекс, обычные сайты, .com)
- ✓ **Сегментирует площадки** на эффективные/средние/неэффективные
- ✓ **Создает файл "Площадки_к_блокировке.csv"** с полным обоснованием
- ✓ **Создает "Аналитическая_справка.txt"** с рекомендациями и финансовой оценкой
- ✓ **Выводит краткое резюме** в консоль с топ-3 самых расходных площадок

#### Требования к входному CSV-файлу:

Файл должен быть экспортирован из Яндекс Директ со следующими колонками (в указанном порядке):

1. Тип площадки
2. Площадка
3. Показы
4. Клики
5. CTR (%)
6. Расход (руб.)
7. Ср. цена клика (руб.)
8. Ср. ставка за клик (руб.)
9. Отказы (%)
10. Ср. цена тыс. показов (руб.)
11. Глубина (стр.)
12. Цена цели (руб.)
13. Конверсии

**Формат файла:**
- Разделитель: ";" (точка с запятой)
- Кодировка: UTF-8 с BOM
- Первые 4 строки: заголовок клиента, итоги, пустая строка, заголовки таблицы (пропускаются автоматически)

#### Выходные файлы:

После выполнения скрипт создаст в той же папке два файла:

**1. Площадки_к_блокировке.csv** — список неэффективных площадок с колонками:
- Площадка
- Тип (мобильное приложение / DSP-площадка / Яндекс-площадка / сайт)
- Критерий_минусации
- Номер_критерия (2.1, 2.2а, 2.2б и т.д.)
- Приоритет_блокировки (КРИТИЧНЫЙ / ВЫСОКИЙ / СРЕДНИЙ / ДОПОЛНИТЕЛЬНЫЙ)
- Показов, Кликов, CTR_%, Конверсий
- Стоимость_конверсии_руб, Расход_руб
- Показатель_отказов_%, Глубина_просмотра
- Отклонение_от_среднего
- Обоснование (детальное объяснение)
- Рекомендация (БЛОКИРОВАТЬ / БЛОКИРОВАТЬ НЕМЕДЛЕННО / НАБЛЮДАТЬ)
- Особенности (метки типа площадки)

**2. Аналитическая_справка.txt** — полный отчет с разделами:
- Общая статистика (период анализа, количество площадок)
- Финансовая оценка (расходы, потенциальная экономия)
- Распределение по критериям минусации
- Распределение по типам площадок
- Топ-10 самых расходных неэффективных площадок
- Рекомендации по приоритетам блокировки
- Анализ мобильных приложений, DSP-площадок и Яндекс-площадок

#### Пример использования:

**Способ 1: Передача пути как аргумента (рекомендуется)**

```bash
# Windows
python analyze_rsa.py "C:\Users\Roman\Desktop\direct\ваш_файл.csv"

# Linux/Mac
python analyze_rsa.py "/path/to/your/file.csv"
```

**Способ 2: Изменение пути в коде**

```python
# В файле analyze_rsa.py найди функцию main() (строка 550)
# Измени путь к файлу на актуальный:

file_path = r'C:\Users\Roman\Desktop\direct\ваш_файл.csv'

# Затем запусти скрипт без аргументов
python analyze_rsa.py
```

**Консольный вывод:**

Скрипт покажет прогресс выполнения каждого шага:
- ✓ Загрузка и предобработка данных
- ✓ Расчёт средних показателей
- ✓ Применение критериев минусации
- ✓ Сегментация площадок
- ✓ Сохранение результатов
- ✓ Создание аналитической справки

И финальное резюме с количеством площадок к блокировке, потенциальной экономией бюджета и топ-3 самых расходных неэффективных площадок.

---

**ПРИМЕЧАНИЕ ДЛЯ ИИ-АГЕНТА:**

Все шаги ниже (ШАГ 1-7) выполняются скриптом `analyze_rsa.py` автоматически. Они оставлены в инструкции для:
- Понимания логики работы алгоритма анализа
- Возможности ручной проверки результатов
- Объяснения критериев принятия решений пользователю
- Доработки критериев при необходимости

**Не выполняй шаги 1-7 вручную!** Всегда используй скрипт `analyze_rsa.py`.

---

## ШАГ 1: ПОДГОТОВКА ДАННЫХ

### 1.1 Загрузка исходных данных

- [ ] Получить отчет по площадкам из Яндекс Директ в формате CSV
- [ ] Определить кодировку файла (обычно UTF-8 с BOM)
- [ ] Пропустить первые 4 строки файла (заголовок клиента, итоги, пустая строка)
- [ ] Убедиться, что анализ начинается со строки заголовков таблицы ("Тип площадки";"Площадка"...)
- [ ] Проверить наличие всех необходимых метрик в отчете
- [ ] Убедиться, что данные актуальны (период анализа должен быть указан)

### 1.2 Обязательные поля для анализа

Убедись, что в данных присутствуют следующие показатели:
- Название/URL площадки
- Количество показов
- Количество кликов
- CTR (%)
- Количество конверсий
- Стоимость конверсии (₽)
- Стоимость клика (₽)
- Расход бюджета (₽)
- Показатель отказов (%)
- Глубина просмотра (стр.)

### 1.3 Расчет базовых метрик

Рассчитай следующие средние показатели по всем площадкам:
- Средний CTR
- Средняя стоимость конверсии (ТОЛЬКО по площадкам с конверсиями > 0)
- Средняя стоимость клика
- Средний показатель отказов
- Средняя глубина просмотра
- Среднее количество конверсий на площадку
- Средний расход на площадку

### 1.4 Предобработка данных

Перед началом анализа выполни:
- [ ] Заменить все значения "-" на 0 в числовых колонках
- [ ] Конвертировать числовой формат: запятая → точка (4,46 → 4.46)
- [ ] Проверить корректность типов данных (числа должны быть числами, не строками)
- [ ] Удалить строки с пустыми названиями площадок

---

## ШАГ 2: ПРИМЕНЕНИЕ КРИТЕРИЕВ МИНУСАЦИИ

Проверь каждую площадку по следующим критериям. Площадка подлежит минусации, если выполняется ХОТЯ БЫ ОДИН из критериев:

### 2.1 КРИТИЧНЫЙ — Высокая стоимость конверсии ИЛИ отсутствие конверсий при расходе

**Условие А (для площадок с конверсиями):**
Цена цели > (Средняя цена цели × 2.5)

**Условие Б (для площадок без конверсий):**
Конверсии = 0 И Расход ≥ 50 руб. И Клики ≥ 10

**Действие:**
- [ ] Рассчитать среднюю цену цели ТОЛЬКО по площадкам с конверсиями > 0
- [ ] Для условия А: выявить площадки, где цена цели превышает порог (Средняя × 2.5)
- [ ] Для условия Б: выявить площадки без результатов при расходе ≥ 50₽ и кликах ≥ 10
- [ ] Зафиксировать для каждой: расход, клики, конверсии, стоимость конверсии

**Обоснование:**
- Условие А: Площадка приводит конверсии, но слишком дорого — неэффективное расходование бюджета
- Условие Б: Площадка расходует бюджет без результата (50₽ ≈ 30-35 кликов — достаточно для первичных выводов)

**ИСКЛЮЧЕНИЕ:** Если площадка работает менее 7 дней — перенести в категорию "Наблюдение" вместо блокировки

**ВАЖНО:** Если площадка неэффективна только в одной кампании, не блокируй её глобально для всех кампаний.

### 2.2а КРИТИЧНЫЙ — Экстремально высокий CTR (мошеннический трафик)

**Условие:** CTR ≥ 50%

**Действие:**
- [ ] Выявить все площадки с CTR ≥ 50%
- [ ] Немедленная блокировка без дополнительных проверок
- [ ] Зафиксировать: CTR, количество кликов, расход

**Обоснование:**
CTR выше 50% физически невозможен для легитимного трафика в РСЯ. Это явный признак:
- Ботового трафика
- Случайных/непроизвольных кликов
- Кликфрода (накрутки)

**Приоритет:** НЕМЕДЛЕННАЯ БЛОКИРОВКА

---

### 2.2б ВЫСОКИЙ ПРИОРИТЕТ — Подозрительно высокий CTR

**Условие:** CTR > 10% И CTR < 50% И Показов ≥ 10

**Действие:**
- [ ] Выявить площадки с CTR в диапазоне 10-50%
- [ ] Проверить наличие конверсий
- [ ] Если конверсий = 0 → БЛОКИРОВАТЬ немедленно
- [ ] Если конверсии > 0 → проверить стоимость конверсии (применить критерий 2.1)
- [ ] Зафиксировать CTR и отклонение от среднего (норма ~1-2%)

**Обоснование:**
CTR 10-50% указывает на некачественный трафик (случайные клики, детская аудитория в играх, неудачное размещение), но требует проверки результативности.

**Приоритет:** ВЫСОКИЙ — блокировать до накопления большой статистики по конверсиям

### 2.3 ВЫСОКИЙ ПРИОРИТЕТ — Критически низкий CTR

**Условие:** CTR < 0.20%

**Действие:**
- [ ] Выявить площадки с CTR ниже 0.20%
- [ ] Проверить количество показов (минимум 1000 для статистической значимости)
- [ ] Зафиксировать фактический CTR

**Обоснование:** Низкая кликабельность снижает показатель качества объявлений и увеличивает стоимость клика по всей кампании.

### 2.4 СРЕДНИЙ ПРИОРИТЕТ — Низкая вовлеченность пользователей

**Условие:**
(Показатель отказов > Средний × 1.2) ИЛИ (Глубина просмотра ≤ 1.0 стр.)

**Действие:**
- [ ] Рассчитать средний показатель отказов по всем площадкам
- [ ] Выявить площадки с отказами выше порога (Средний × 1.2)
- [ ] Выявить площадки с глубиной просмотра = 1.0 (посетители не переходят дальше первой страницы)
- [ ] Проверить наличие конверсий
- [ ] Если конверсий = 0 И выполняется хотя бы одно условие → к блокировке
- [ ] Зафиксировать показатель отказов и глубину просмотра

**Обоснование:**
- Высокий показатель отказов (визиты < 15 сек) = низкий интерес аудитории к предложению
- Глубина 1.0 = пользователь не изучает сайт, не переходит на другие страницы, малая вероятность конверсии

### 2.5 ДОПОЛНИТЕЛЬНЫЙ — Мобильные приложения и DSP-площадки

**Условие А (мобильные приложения):**
Название начинается с префиксов: com., ru., by., fm., org., cz., net., biz., game., afisha., asian., air.
И НЕ содержит домен второго уровня (т.е. НЕ "yandex.ru", НЕ "dzen.ru")

**Условие Б (программатик-площадки):**
Название содержит префикс "dsp-" (например: dsp-ironsource.yandex.ru, dsp-start-io.yandex.ru)

**Действие:**
- [ ] Идентифицировать мобильные приложения по префиксам (com.miui.videoplayer, com.imo.android.imoim и т.д.)
- [ ] Идентифицировать DSP-площадки по префиксу "dsp-"
- [ ] Проверить их эффективность (CTR, конверсии, стоимость клика)
- [ ] Применить усиленный анализ:
  - Если CTR > 15% И конверсий = 0 → БЛОКИРОВАТЬ
  - Если цена клика < 0.5₽ И CTR > 20% → БЛОКИРОВАТЬ
  - Если расход > 30₽ И конверсий = 0 → БЛОКИРОВАТЬ

**Обоснование:**
Мобильные приложения часто демонстрируют высокий CTR из-за:
- Случайных кликов при прокрутке контента
- Неудачного расположения рекламы в интерфейсе
- Детской аудитории (в играх)
- Непроизвольных касаний экрана

**ВАЖНО:** Проверяй индивидуально каждое приложение, НЕ блокируй автоматически все приложения. Некоторые могут быть эффективны.

### 2.6 ДОПОЛНИТЕЛЬНЫЙ — Площадки с доменом .com

**Условие:** Домен площадки оканчивается на .com И конверсий = 0 И расход > 30₽

**Действие:**
- [ ] Выявить площадки с доменом .com
- [ ] Проверить наличие конверсий
- [ ] Проверить размер расхода
- [ ] Если конверсий = 0 И расход > 30₽ → к блокировке
- [ ] Оценить стоимость конверсии (если конверсии есть)

**Обоснование:**
Площадки .com могут не соответствовать российской аудитории и приносить нецелевой трафик.

**ВАЖНО:** НЕ блокируй .com автоматически — некоторые международные площадки могут быть эффективны для определенных ниш.

### 2.7 ДОПОЛНИТЕЛЬНЫЙ — Нулевые конверсии при значительном расходе

**ПРИМЕЧАНИЕ:** Этот критерий теперь включен в критерий 2.1 (Условие Б). Используй критерий 2.1 для площадок без конверсий.

---

### 2.8 ВЫСОКИЙ ПРИОРИТЕТ — Подозрительно низкая цена клика + высокий CTR

**Условие:**
Средняя цена клика < (Средняя по всем площадкам × 0.3) И CTR > 15%

**Действие:**
- [ ] Рассчитать среднюю цену клика по всем площадкам
- [ ] Выявить площадки с ценой клика ниже 30% от средней
- [ ] Проверить их CTR
- [ ] Если CTR > 15% → к блокировке
- [ ] Зафиксировать: цену клика, отклонение от средней, CTR

**Обоснование:**
Комбинация сверхнизкой цены клика и высокого CTR указывает на:
- Ботовый трафик (площадка "обманывает" аукцион низкими ставками)
- Массовые случайные клики в приложениях
- Накрутку показателей

**Пример:**
Средняя цена клика по кампании = 1.44₽
Площадка: цена клика 0.25₽ (17% от средней) при CTR 56% → БЛОКИРОВАТЬ

**Приоритет:** ВЫСОКИЙ — такой трафик почти никогда не конвертируется

## ШАГ 2.9: ОСОБЫЕ ПРАВИЛА ДЛЯ ЯНДЕКС-ПЛОЩАДОК

Для площадок **yandex.ru**, **dzen.ru**, **game.yandex.ru**, **m.pogoda.yandex.ru** и других площадок с доменом yandex применяй **МЯГКИЕ критерии** с повышенными порогами.

### Коэффициенты для Яндекс-площадок (×1.5 к обычным):

| Критерий | Обычный порог | Для Яндекс-площадок (×1.5) |
|----------|---------------|----------------------------|
| Цена цели | > Средняя × 2.5 | > Средняя × 3.75 |
| Высокий CTR (п. 2.2б) | > 10% | > 15% |
| Низкий CTR | < 0.20% | < 0.13% |
| Показатель отказов | > Средний × 1.2 | > Средний × 1.8 |
| Расход без конверсий | > 50₽ | > 100₽ |

### Действие:

- [ ] Идентифицировать Яндекс-площадки (домен содержит "yandex" ИЛИ площадка = "dzen.ru")
- [ ] Применить повышенные пороги при проверке критериев минусации
- [ ] Отметить в выходном файле как "Яндекс-площадка" в колонке "Особенности"
- [ ] При сомнениях — оставить Яндекс-площадку для наблюдения, не блокировать

### Обоснование:

Площадки Яндекса обычно приводят качественный трафик и имеют:
- Большой охват целевой аудитории
- Высокую вовлеченность пользователей
- Доверие со стороны пользователей

Их блокировка должна быть обоснована **очень серьёзными отклонениями** от нормы.

### ИСКЛЮЧЕНИЕ:

Критерий 2.2а (Экстремальный CTR ≥ 50%) применяется КО ВСЕМ площадкам без исключений, включая Яндекс.

---

## ШАГ 3: ПРОВЕРКА СТАТИСТИЧЕСКОЙ ЗНАЧИМОСТИ

Для каждой площадки, попавшей под критерии минусации, проверь:

### 3.1 Дифференцированные пороги статистической значимости

В зависимости от типа критерия применяй разные пороги для принятия решения:

**Для CTR-критериев (2.2а, 2.2б, 2.3, 2.8):**
- Минимум показов: **100** (вместо 1000)
- Минимум кликов: **5**
- Период сбора данных: **≥ 3 дня** (вместо 7)

**Для конверсионных критериев (2.1, 2.4):**
- Минимум кликов: **20** (вместо 30)
- Период сбора данных: **≥ 7 дней**

**Для расходных критериев (2.1 Условие Б, 2.6):**
- Минимум расхода: **10₽**
- Период сбора данных: **≥ 3 дня**

**ВАЖНО:**
Если данных недостаточно для категоричных выводов, но площадка демонстрирует экстремальные показатели, действуй так:
- CTR ≥ 50% → **БЛОКИРОВАТЬ немедленно** (даже при малом объеме данных)
- CTR > 30% И цена клика < 0.30₽ → **ПРЕВЕНТИВНАЯ блокировка** с пометкой "Требует проверки через 7 дней"
- Остальные случаи → "Требует наблюдения" вместо немедленной блокировки

### 3.2 Исключения

НЕ блокируй площадку, если:
- Данных недостаточно для статистической значимости
- Площадка эффективна в других кампаниях (если данные доступны)
- Площадка была запущена менее 7 дней назад

---

## ШАГ 4: СЕГМЕНТАЦИЯ ПЛОЩАДОК

Раздели все проанализированные площадки на 3 категории:

### Категория A: ЭФФЕКТИВНЫЕ

**Критерии:**
- Стоимость конверсии ≤ Средней
- CTR в диапазоне 0.5-2%
- Показатель отказов ≤ Среднего
- Наличие конверсий

**Действие:** Оставить в показах, не трогать.

### Категория B: СРЕДНИЕ (требуют наблюдения)

**Критерии:**
- Стоимость конверсии в диапазоне 1× - 2.5× от средней
- CTR в диапазоне 0.2-3%
- Недостаточно данных для окончательных выводов

**Действие:** Продолжить мониторинг, принять решение после накопления данных.

### Категория C: НЕЭФФЕКТИВНЫЕ (к блокировке)

**Критерии:**
- Выполняется хотя бы один критерий минусации из Шага 2
- Достаточно данных для статистической значимости

**Действие:** Рекомендовать к блокировке с подробным обоснованием.

---

## ШАГ 5: ФОРМИРОВАНИЕ ИТОГОВОГО ФАЙЛА

Создай CSV-файл со следующей структурой:

### 5.1 Структура файла "Площадки_к_блокировке.csv"

**Обязательные колонки:**
1. **Площадка** — название/URL площадки
2. **Тип** — сайт/мобильное приложение/DSP-площадка/Яндекс-площадка
3. **Критерий_минусации** — название критерия, по которому площадка попала в список
4. **Приоритет_блокировки** — КРИТИЧНЫЙ / ВЫСОКИЙ / СРЕДНИЙ / ДОПОЛНИТЕЛЬНЫЙ
5. **Показов** — количество показов
6. **Кликов** — количество кликов
7. **CTR_%** — фактический CTR в процентах
8. **Конверсий** — количество конверсий
9. **Стоимость_конверсии_руб** — фактическая стоимость конверсии (цена цели)
10. **Расход_руб** — общий расход на площадку
11. **Показатель_отказов_%** — процент отказов
12. **Глубина_просмотра** — глубина просмотра в страницах
13. **Отклонение_от_среднего** — на сколько % или во сколько раз показатель хуже среднего
14. **Обоснование** — детальное объяснение, почему площадка рекомендуется к блокировке
15. **Рекомендация** — БЛОКИРОВАТЬ / НАБЛЮДАТЬ / ТЕСТИРОВАТЬ
16. **Особенности** — дополнительные метки: "Яндекс-площадка", "Мобильное приложение", "DSP", ".com домен", "Экстремальный CTR"

### 5.2 Пример строки в файле:

```
"com.miui.videoplayer","Мобильное приложение","Подозрительно высокий CTR + низкая цена клика","ВЫСОКИЙ",944,51,5.40,0,0,50.56,21.43,1.00,"CTR 5.4% превышает норму (1-2%) в 3 раза при цене клика 0.99₽ (69% от средней 1.44₽). Конверсий нет при расходе 50₽ (достаточно для первичных выводов). Показатель отказов 21.43%.","БЛОКИРОВАТЬ","Мобильное приложение, com-префикс"
```

---

## ШАГ 6: СОСТАВЛЕНИЕ АНАЛИТИЧЕСКОЙ СПРАВКИ

Добавь к CSV-файлу текстовый документ "Аналитическая_справка.txt" со следующей информацией:

### 6.1 Общая статистика

- Период анализа
- Всего площадок проанализировано
- Площадок к блокировке: количество и %
- Площадок к наблюдению: количество и %
- Эффективных площадок: количество и %

### 6.2 Финансовая оценка

- Общий расход на неэффективные площадки (₽)
- Средняя стоимость конверсии по эффективным площадкам (₽)
- Средняя стоимость конверсии по неэффективным площадкам (₽)
- Потенциальная экономия бюджета при блокировке (₽)

### 6.3 Распределение по критериям

Для каждого критерия минусации укажи:
- Количество площадок
- % от общего числа к блокировке
- Общий расход на эти площадки

### 6.3а Распределение по типам площадок

- **Мобильные приложения (com.*, и др.):** количество, расход, % от общего
- **DSP-площадки (dsp-*):** количество, расход, % от общего
- **Яндекс-площадки:** количество, расход, % от общего
- **Прочие сайты:** количество, расход, % от общего

### 6.4 Топ-10 самых расходных неэффективных площадок

Список площадок с наибольшим расходом без результата.

### 6.5 Рекомендации

- Приоритет блокировки (с чего начать)
- Площадки для дополнительного тестирования
- Предложения по оптимизации оставшихся площадок
- **Топ-10 мобильных приложений по расходу** (стоит ли продолжать показы в приложениях)
- **Эффективность DSP-площадок** (рекомендация по работе с программатиком)
- **Анализ Яндекс-площадок** (какие оставить, какие оптимизировать)

---

## ШАГ 7: ФИНАЛЬНАЯ ПРОВЕРКА

Перед выгрузкой результата выполни финальную проверку:

### 7.1 Контроль качества

- [ ] Все площадки в категории "БЛОКИРОВАТЬ" имеют достаточно данных
- [ ] Для каждой площадки указано понятное обоснование
- [ ] Нет дублирующихся записей
- [ ] Все числовые данные корректно отформатированы
- [ ] Файлы сохранены в правильном формате (CSV UTF-8)

### 7.2 Проверка логики

- [ ] Средние показатели рассчитаны корректно
- [ ] Пороговые значения применены правильно
- [ ] Приоритеты расставлены адекватно
- [ ] Рекомендации не противоречат друг другу

### 7.3 Соблюдение ограничений

- [ ] Количество площадок к блокировке не превышает 1000 (лимит Яндекс Директ)
- [ ] Учтены особенности видеорекламы (лимит 20 площадок)
- [ ] Баланс между оптимизацией и охватом аудитории соблюден

---

## ФОРМАТ ВЫВОДА РЕЗУЛЬТАТА

Предоставь пользователю:

1. **Файл CSV "Площадки_к_блокировке.csv"** — основной результат анализа
2. **Файл TXT "Аналитическая_справка.txt"** — сводный отчет и рекомендации
3. **Краткое резюме** в чате с ключевыми выводами:
   - Количество площадок к блокировке
   - Потенциальная экономия бюджета
   - Главные проблемные критерии
   - Топ-3 самых расходных неэффективных площадки

---

## ВАЖНЫЕ ПРАВИЛА РАБОТЫ

1. **НЕ придумывай данные** — работай только с предоставленными показателями
2. **Обосновывай каждое решение** — для каждой площадки должно быть понятное объяснение
3. **Учитывай контекст** — не блокируй площадку автоматически, если есть особые обстоятельства
4. **Приоритизируй** — сначала блокируй самые расходные и неэффективные
5. **Документируй расчеты** — показывай, как получены пороговые значения
6. **Будь консервативным** — в случае сомнений лучше оставить площадку для наблюдения
7. **Проверяй статистическую значимость** — малое количество данных не должно приводить к поспешным выводам

---

## НАЧАЛО РАБОТЫ

### Быстрый старт (рекомендуется):

1. **Получи CSV-файл** от пользователя с отчетом из Яндекс Директ
2. **Запусти скрипт с путём к файлу:**
   ```bash
   python analyze_rsa.py "путь/к/файлу.csv"
   ```
3. **Проверь созданные файлы:**
   - `Площадки_к_блокировке.csv`
   - `Аналитическая_справка.txt`
4. **Предоставь пользователю резюме** с ключевыми выводами:
   - Количество площадок к блокировке
   - Потенциальная экономия бюджета
   - Топ-3 самых расходных неэффективных площадок
   - Главные проблемные критерии

### Ручной режим (если скрипт недоступен):

После получения данных:
1. Подтверди получение всех необходимых метрик
2. Укажи период анализа данных
3. Последовательно выполни все шаги 1-7 вручную
4. Предоставь результат в указанном формате

**ВАЖНО:** Всегда используй автоматизацию через `analyze_rsa.py`, если скрипт доступен!

---

## ПРИЛОЖЕНИЕ: СВОДНАЯ ТАБЛИЦА КРИТЕРИЕВ МИНУСАЦИИ

Используй эту таблицу для быстрого поиска критериев и их порогов.

### Таблица критериев (для обычных площадок)

| № | Критерий | Условие | Приоритет | Минимальные данные |
|---|----------|---------|-----------|-------------------|
| **2.1** | **Высокая стоимость конверсии** | Цена цели > Средняя × 2.5 | КРИТИЧНЫЙ | Конверсий ≥ 2, период ≥ 7 дней |
| **2.1Б** | **Нулевые конверсии при расходе** | Конверсий = 0, Расход ≥ 50₽, Клики ≥ 10 | КРИТИЧНЫЙ | Период ≥ 3 дня |
| **2.2а** | **Экстремальный CTR** | CTR ≥ 50% | КРИТИЧНЫЙ | Показов ≥ 10 (немедленная блокировка) |
| **2.2б** | **Подозрительно высокий CTR** | CTR 10-50%, Показов ≥ 10 | ВЫСОКИЙ | Показов ≥ 100, период ≥ 3 дня |
| **2.3** | **Критически низкий CTR** | CTR < 0.20% | ВЫСОКИЙ | Показов ≥ 100, период ≥ 3 дня |
| **2.4** | **Низкая вовлеченность** | Отказы > Средний × 1.2 ИЛИ Глубина ≤ 1.0 | СРЕДНИЙ | Клики ≥ 20, период ≥ 7 дней |
| **2.5** | **Мобильные приложения** | Префиксы com., ru., etc. + CTR > 15% И конверсий = 0 | ДОПОЛНИТЕЛЬНЫЙ | Индивидуально |
| **2.5Б** | **DSP-площадки** | Префикс dsp- + усиленные критерии | ДОПОЛНИТЕЛЬНЫЙ | Индивидуально |
| **2.6** | **Домены .com** | .com + конверсий = 0 + расход > 30₽ | ДОПОЛНИТЕЛЬНЫЙ | Период ≥ 7 дней |
| **2.8** | **Низкая цена + высокий CTR** | Цена клика < Средняя × 0.3 И CTR > 15% | ВЫСОКИЙ | Клики ≥ 5, период ≥ 3 дня |

### Специальные коэффициенты для Яндекс-площадок (×1.5)

| Критерий | Обычный порог | Для Яндекс × 1.5 |
|----------|---------------|------------------|
| Цена цели | > Средняя × 2.5 | > Средняя × 3.75 |
| Высокий CTR (п. 2.2б) | > 10% | > 15% |
| Низкий CTR | < 0.20% | < 0.13% |
| Показатель отказов | > Средний × 1.2 | > Средний × 1.8 |
| Расход без конверсий | > 50₽ | > 100₽ |

**ВАЖНО:** Критерий 2.2а (CTR ≥ 50%) применяется ко ВСЕМ площадкам без исключений, включая Яндекс.

### Приоритеты блокировки

1. **КРИТИЧНЫЙ** — блокировать немедленно (экстремальный CTR, высокая стоимость конверсии, нулевые конверсии при расходе)
2. **ВЫСОКИЙ** — блокировать после минимальной проверки (подозрительный CTR, низкий CTR, низкая цена + высокий CTR)
3. **СРЕДНИЙ** — блокировать при подтверждении неэффективности (низкая вовлеченность)
4. **ДОПОЛНИТЕЛЬНЫЙ** — рассматривать индивидуально (мобильные приложения, DSP, .com)

### Типы площадок

- **Мобильные приложения:** com., ru., by., fm., org., cz., net., biz., game., afisha., asian., air.
- **DSP-площадки:** dsp-ironsource.yandex.ru, dsp-start-io.yandex.ru и др.
- **Яндекс-площадки:** yandex.ru, dzen.ru, game.yandex.ru, m.pogoda.yandex.ru
- **Прочие сайты:** все остальные

---

## КОНЕЦ ИНСТРУКЦИИ
